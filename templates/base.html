<!DOCTYPE html>
<html>
    <head>
        <title>Saint Louis Libary Search Engine</title>
        <style type="text/css">
            .error {
                color: red;   
            }
            .theme {
              background:url(../images/bgimage.jpg);
              background-repeat:no-repeat;
              background-position:center center;
              background-size: cover;
            }
            .searchhis {
              table-layout: auto;
              width: 80%;
              align-self: center;
            }
            #outer{
              width:100%;
              text-align: left;
              padding-left: 1em
              }
            .inner
              {
              display: inline-block;
              }
            body{
              padding: 3em
            }
        </style>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>




       <script>

            function toggle(source) {
               checkboxes = document.getElementsByName('library');
               for(var i=0, n=checkboxes.length;i<n;i++) {
                 checkboxes[i].checked = source.checked;
               }
             }
             
             </script>
    </head>
    <body>      
                <!-- Collect the nav links, forms, and other content for toggling 
              
                <div class="navbar navbar-expand-lg navbar-dark bg-primary" id="bs-example-navbar-collapse-1">
                  <ul class="nav navbar-nav">
                    <a class="navbar-brand" href="#">
                          <img alt="Brand" src="...">
                        </a>
                    <li class="active" id="navbarColor01"><a href="/">Home <span class="sr-only">(current)</span></a></li>
                    <li class=".dropdown-menu">
                      <button class="btn btn-default dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">Contact information
                        <span class="caret"></span></button>
                      <ul class="dropdown-menu">
                        <li role="presentation"><a href="https://slpl.bibliocommons.com/locations">Saint Louis Public Library System</a></li>
                        <li role="presentation"><a href="https://www.slcl.org/branches">Saint Louis County Library System</a></li>
                        <li role="presentation"><a href="http://www.mlc-stl.org/find-your-library/">Municipal Library System</a></li>
                        <li role="presentation"><a href="https://bridges.searchmobius.org/">Bridges Library System</a></li>
                        <li role="presentation"><a href="http://catalog.wustl.edu">Washington University Library System</a></li>
                        <li role="presentation"><a href="http://libcat.slu.edu/">Saint Louis University Library System</a></li>
                      </ul>
                    </li>
                  </ul>
                  <form class="navbar-form navbar-left">
                    <div class="form-group">
                      <li class="dropdown">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                      <ul class="dropdown-menu">
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Another action</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">Separated link</a></li>
                      <input type="text" class="form-control" placeholder="Search">
                    </div>
                    <button type="submit" class="btn btn-default">Submit</button>
                  </form>
                  <ul class="nav navbar-nav navbar-right">
                      </ul>
                    </li>
                  </ul>
                </div><!-- /.navbar-collapse -->
              </div><!-- /.container-fluid -->
            </nav>



        <div style='float: right'>
          {% if 'user' in session %}
            <div>Hello, {{ session['user'] }}</div>
            <form action="/logout" method="post" id='logout'>
              <input type="submit" value="Log Out" />
            </form>
          {% else %}
            <form action="/register" method="post" id='login'>
              <table>
              <tr>
                    <td>Would you like to view saved searches?
                <label>Username</label>
                    </td>
                     <td>
                     <input name="user" type="text" value='{{user}}' />
                    <td><label>Password</label>
                    </td>
                    <td>
                    <input name="password" type="password" value='{{password}}' />      
                 </td>
                </tr>
                    <td class="error">{{password_error}}
                    </td>  
                     <td class="error"> {{username_error}}
                    </td>
                    <td>
                      <input type="submit" value="Sign in" />
                    </td>
                  </table>
            </form>
        {% endif %}
        </div>
        <h1>
            Saint Louis Libary Search Engine
        </h1>
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul class=flashes>
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
    </ul>
           {% endif %}
          {% endwith %}

          <form method='POST' action='/'>
            <table>
                <tr>
                    <td>
                        <label>Search by:
                                <select name="category">
                                    <option value="keyword" default>Keyword</option>
                                    <option value="title">Title</option>
                                    <option value="subject">Subject</option>
                                    <option value="author">Author</option>
                                </select>
                        </label>
                    </td>
                     <td>      
                        <label>Search for:
                            {% if query %}
                                <input name="query" type="text" value="{{query}}"/>
                            {% else %}
                                <input name="query" type="text" placeholder="Search here" />
                            {% endif %}
                        </label> 
                     </td>
                </tr>
                <tr>
                    <td> * Note: Not all libraries except all search types</td>
                </tr>
                    <tr><td></td></tr>
            </table>
            
            <nav>
            <ul class="nav nav-tabs">
                    {% if all_searches %}
                    <li role="presentation" ><a href="/">Home</a></li>
                    {% if 'user' in session %}
                    <li role="presentation" class="active"><a href="/searchhistory">Search History</a></li>
                    {% endif %}
                    {% else %}
                    <li role="presentation" class="active" ><a href="/">Home</a></li>
                    {% if 'user' in session %}
                    <li role="presentation" ><a href="/searchhistory">Search History</a></li>
                    {% endif %}
                    {% endif %}
                  </ul>
            </nav>
            
            <table>
            <!--send library name object   -->
                    <tr>
                        {% for library in library_table %} 
                        <td>
                        {{loop.index}})
                    <label>
                        <input type="checkbox" name="library" value="{{library.id}}" />{{library.library_name}}
                    </label>
                        </td>
                        {% if loop.index is divisibleby 4 %}
                        </tr><tr>
                        {% endif %}
                    {% endfor %}
                    <input type="checkbox" onClick="toggle(this)" /> Select All<br/>
                    </tr>
                    <tr>
                        <td>
                            <input type="submit" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            For development purposes only:<br>
                                    <input type="radio" name="view" value="tab"> Tab format<br>
                                    <input type="radio" name="view" value="inline" checked> Inline<br>
                        </td>
                        </tr>
                        </table>

        {% block content %}
        {% endblock %}

        {% block inline %}
        {% endblock %}

        {% block contact %}
        {% endblock %}

    </body>
</html>